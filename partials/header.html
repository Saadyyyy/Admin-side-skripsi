<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>soal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
        <style>
            .profile-circle {
              width: 50px;  /* Adjust the size */
              height: 50px;  /* Adjust the size */
              border-radius: 50%;  /* Make it circular */
              overflow: hidden;  /* Hide overflow to keep the image within the circle */
              display: flex;
              justify-content: center;
              align-items: center;
            }
          
            .profile-img {
              width: 100%;
              height: 100%;
              object-fit: cover;  /* Ensure the image fits inside the circle */
            }
          </style>
        
</head>
<body>
    <nav class="navbar navbar-expand-lg bg-primary" data-bs-theme="dark">
        <div class="container-fluid">
          <a class="navbar-brand " href="dashboard.html" style="font-size: 1.4rem;font-weight: bold;">Bank Soal CPNS</a>
          <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav ms-5">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="dashboard.html">Dashboard</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="category.html">Category</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="soal.html">Soal</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="rangking.html">Rangking</a>
              </li>
            </ul>
            <div class="ms-auto d-flex align-items-center" id="user-profile">
            </div>
          </div>
        </div>
      </nav>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
     document.addEventListener("DOMContentLoaded", function () {
    // Ambil token dari localStorage (atau sessionStorage)
    let token = localStorage.getItem('token');  // Misalnya token disimpan di localStorage

    // Jika token tidak ada atau invalid, redirect ke halaman login
    if (!token) {
        window.location.href = 'login.html';  // Redirect ke halaman login
        return;
    }

    // Jika token ada, lakukan verifikasi lebih lanjut jika perlu
    // (misalnya cek token dengan API untuk memastikan token masih valid)
    checkTokenValidity(token);
});

async function checkTokenValidity(token) {
    try {
        const response = await fetch("https://3r1djzn5-8080.asse.devtunnels.ms/validate-token", {
            method: "GET",
            headers: {
                "Authorization": `Bearer ${token}`,
            }
        });

        if (response.status === 401) {
            // Jika token tidak valid (expired atau salah), redirect ke halaman login
            window.location.href = 'login.html';
        } else if (!response.ok) {
            console.error("Gagal memverifikasi token.");
        }
    } catch (error) {
        console.error("Error saat memverifikasi token:", error);
        // Jika ada kesalahan, redirect ke halaman login
        window.location.href = 'login.html';
    }
}

    </script>
</body>
</html>
